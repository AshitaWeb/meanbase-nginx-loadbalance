"use strict";angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"],ERANAMES:["Antes de Cristo","Ano do Senhor"],ERAS:["a.C.","d.C."],FIRSTDAYOFWEEK:6,MONTH:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sáb"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y HH:mm:ss",mediumDate:"d 'de' MMM 'de' y",mediumTime:"HH:mm:ss",short:"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"R$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"pt-br",pluralCat:function(a,c){return a>=0&&a<=2&&2!=a?b.ONE:b.OTHER}})}]),function(){angular.module("core",[]).directive("loading",["$http",function(a){return{restrict:"A",link:function(b,c,d){b.isLoading=function(){return a.pendingRequests.length>0},b.$watch(b.isLoading,function(a){a?c.show():c.hide()})}}}])}(),function(){function a(a,b,c,d,e){function f(d){var e=b.defer();return a.post(c.api+"/login",d).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise}function g(d,e){var f=b.defer();return a.post(c.api+d,e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}function h(d,e){var f=b.defer();return a({url:c.api+d,method:"PUT",data:e,headers:{"Content-Type":"application/json"}}).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}function i(d){var e=b.defer();return a.get(c.api+d).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise}function j(d){var e=b.defer();return a.delete(c.api+d).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise}function k(a,d,f,g){function h(a){i.resolve(a.data)}var i=b.defer(),j={url:c.api+a,data:d,method:g,file:f};return e.upload(j).then(h),i.promise}var l={login:f,get:i,del:j,post:g,put:h,upload:k};return l}angular.module("core").factory("ApiService",a),a.$inject=["$http","$q","myConfig","$state","Upload"]}(),function(){function a(){function a(a,b){c[a]=b}function b(a){return c[a]}var c={};return{set:a,get:b}}angular.module("core").factory("Temp",a)}(),function(){function a(a,b,c,d){function e(){return d.localStorage.token}function f(a){d.localStorage.token=a}var g={getToken:e,setToken:f};return g}angular.module("core").factory("JwtService",a),a.$inject=["$http","$q","myConfig","$window"]}(),function(){function a(a){var b,c=a.get("coreConfig");return{uncache:function(a){var b=Date.now().toString();return c.cache||(a=a+"?v="+b),a},$get:function(){return{url:b}}}}angular.module("core").provider("Loading",a),a.$inject=["$injector"]}(),function(){function a(a,b){function c(c){c=c||"";var d=b.defer();return a.get("/v1/categoria/all/"+c).then(function(a){d.resolve(a.data)}),d.promise}function d(){var c=b.defer();return a.get("/v1/financeiro/banco/all").then(function(a){c.resolve(a.data)}),c.promise}function e(){var c=b.defer();return a.get("/v1/tipo-contato").then(function(a){c.resolve(a.data)}),c.promise}function f(){var c=b.defer();return a.get("/v1/config").then(function(a){c.resolve(a.data)}),c.promise}function g(){var c=b.defer();return a.get("/v1/financeiro/tipo-pagamento/all").then(function(a){c.resolve(a.data)}),c.promise}function h(){var c=b.defer();return a.get("/v1/financeiro/caixa/all").then(function(a){c.resolve(a.data)}),c.promise}function i(){var c=b.defer();return a.get("/v1/cadastro/clientes").then(function(a){c.resolve(a.data)}),c.promise}function j(){var c=b.defer();return a.get("/v1/cadastro/clientes/lead").then(function(a){c.resolve(a.data)}),c.promise}function k(){var c=b.defer();return a.get("/v1/ramo-atividade/all").then(function(a){c.resolve(a.data)}),c.promise}function l(){var c=b.defer();return a.get("/v1/cadastro/fornecedores").then(function(a){c.resolve(a.data)}),c.promise}function m(){var c=b.defer();return a.get("/v1/profissao/all").then(function(a){c.resolve(a.data)}),c.promise}function n(){var c=b.defer();return a.get("/v1/unidade/all").then(function(a){c.resolve(a.data)}),c.promise}function o(){var c=b.defer();return a.get("/v1/produto/all").then(function(a){c.resolve(a.data)}),c.promise}function p(){var c=b.defer();return a.get("/v1/produto/all/acabados").then(function(a){c.resolve(a.data)}),c.promise}function q(){var c=b.defer();return a.get("/v1/produto/all/locacao").then(function(a){c.resolve(a.data)}),c.promise}function r(){var c=b.defer();return a.get("/v1/financeiro/parcelamento/all").then(function(a){c.resolve(a.data)}),c.promise}function s(c){var d=b.defer();return c=c||"",a.get("/v1/situacao/all/"+c).then(function(a){d.resolve(a.data)}),d.promise}function t(){var c=b.defer();return a.get("/v1/marca/all/").then(function(a){c.resolve(a.data)}),c.promise}function u(){var c=b.defer();return a.get("/v1/nbs/all/").then(function(a){c.resolve(a.data)}),c.promise}function v(c){var d=b.defer();return a.get("/v1/orcamento/pdf/"+c).then(function(a){d.resolve(a.data)}),d.promise}function w(c){var d=b.defer();return a.get("/v1/grupo/classe/"+c).then(function(a){d.resolve(a.data)}),d.promise}function x(c){var d=b.defer();return a.get("/v1/subgrupo/grupo/"+c).then(function(a){d.resolve(a.data)}),d.promise}function y(c){var d=b.defer();return a.get("/v1/frete/buscar/"+JSON.stringify(c)).then(function(a){d.resolve(a.data)}),d.promise}function z(c){var d=b.defer();return a.post("/v1/frete/",c).then(function(a){d.resolve(a.data)}),d.promise}function A(){var c=b.defer();return a.get("/v1/classe").then(function(a){c.resolve(a.data)}),c.promise}function B(c){var d=b.defer();return a.get("/v1/cidade/all/"+c).then(function(a){d.resolve(a.data)}),d.promise}function C(){var c=b.defer();return a.get("/v1/funcionario").then(function(a){c.resolve(a.data)}),c.promise}function D(){var c=b.defer();return a.get("/v1/transportadora").then(function(a){c.resolve(a.data)}),c.promise}function E(){var c=b.defer();return a.get("/v1/cfop/all").then(function(a){c.resolve(a.data)}),c.promise}function F(){var c=b.defer();return a.get("/v1/cnae/all").then(function(a){c.resolve(a.data)}),c.promise}function G(){var c=b.defer();return a.get("/v1/cadastro/tags").then(function(a){c.resolve(a.data)}),c.promise}function H(c){var d=b.defer();return a.get("/v1/produto/get/"+c+"/historico").then(function(a){d.resolve(a.data)}),d.promise}function I(){var c=b.defer();return a.get("/v1/produto/resumo-acabados").then(function(a){c.resolve(a.data)}),c.promise}function J(c){var d=b.defer();return a.post("/v1/contrato/agendarDevolucao",c).then(function(a){d.resolve(a.data)}),d.promise}function K(a){var b=new Blob([document.getElementById(a).innerHTML],{type:"text/plain;charset=utf-8;"});saveAs(b,"relatorio.xls")}var L={getCategorias:c,getBancos:d,getTipos:e,getConfig:f,getFormaPagamentos:g,getCaixas:h,getClientes:i,getLeads:j,getFornecedores:l,getRamoAtividade:k,getProfissoes:m,getUnidades:n,getProdutos:o,getProdutosLocacao:q,getParcelamentos:r,getSituacoes:s,getMarcas:t,getNbss:u,getPdfOrcamento:v,getGrupos:w,getSubGrupos:x,getClasses:A,getFrete:y,saveFrete:z,getCidades:B,getFuncionarios:C,getHistoricoProduto:H,getResumoAcabados:I,agendarDevolucao:J,getProdutosAcabados:p,getTransportadoras:D,getCfop:E,getCnae:F,getTags:G,exportData:K};return L}angular.module("core").factory("DbService",a),a.$inject=["ApiService","$q"]}(),function(){function a(a){a.otherwise("/dashboard")}function b(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.localStorage.token&&(a.headers.Authorization=c.localStorage.token),a},response:function(a){return 401!==a.status&&a.data.login!==!0||(c.localStorage.token="",d.path("/login")),a||b.when(a)}}}function c(a){a.interceptors.push("authInterceptor")}function d(a,b,c,d){a.$on("$locationChangeStart",function(){c.search().token&&b.setToken(c.search().token),b.getToken()&&"null"!=b.getToken()||c.path("/login")})}function e(a){var b="E";a.localStorage.code!==b&&(a.localStorage.removeItem("filtro"),a.localStorage.removeItem("filtroCompra"),a.localStorage.removeItem("filtroContrato"),a.localStorage.removeItem("filtroFluxo"),a.localStorage.removeItem("filtroOrcamentos"),a.localStorage.removeItem("filtroReceitas"),a.localStorage.removeItem("filtroVendas"),a.localStorage.removeItem("filtroTransferencia"),a.localStorage.removeItem("filtroBalancete")),a.localStorage.code=b}angular.module("app",["ui.router","ui.bootstrap","ngSanitize","ui.utils.masks","idf.br-filters","toaster","bootstrapLightbox","angular.morris-chart","core","ngMap","login","dashboard","usuario","config"]).filter("nl2br",["$sanitize",function(a){var b=/xhtml/i.test(document.doctype)?"<br />":"<br>";return function(c){return c=(c+"").replace(/(\r\n|\n\r|\r|\n|&#10;&#13;|&#13;&#10;|&#10;|&#13;)/g,b+"$1"),a(c)}}]).config(a),a.$inject=["$urlRouterProvider"],angular.module("app").factory("authInterceptor",b),b.$inject=["$rootScope","$q","$window","$location"],angular.module("app").config(c),c.$inject=["$httpProvider"],angular.module("app").run(d),d.$inject=["$rootScope","JwtService","$location","$state"],angular.module("app").run(e),e.$inject=["$window"]}(),function(){function a(a,b){function c(a,b){a.localStorage.token=null,b.go("login",{},{reload:!0,inherit:!1})}a.state("login",{url:"/login",views:{"":{templateUrl:b.uncache("app/modules/login/login.html"),controller:"LoginController",controllerAs:"vm"}}}).state("logout",{url:"/logout",views:{"":{controller:c}}}),c.$inject=["$window","$state"]}angular.module("login",[]).config(a),a.$inject=["$stateProvider","LoadingProvider"]}(),function(){function a(a,b,c,d){function e(){a.login(f.form).then(function(a){f.status=a,a.success?(d.pop("success","Login",a.message),c.setToken(a.token),b.go("dashboard")):d.pop("error","Erro",a.message)})}var f=this;f.form={},f.form.login="",f.form.password="",f.status={},f.status.success=!0,f.status.message="",f.login=e}angular.module("login").controller("LoginController",a),a.$inject=["ApiService","$state","JwtService","toaster"]}(),function(){function a(a,b){a.state("dashboard",{url:"/dashboard",views:{"":{templateUrl:b.uncache("app/modules/dashboard/dashboard.html"),controller:"DashboardController",controllerAs:"vm"},nav:{templateUrl:b.uncache("app/templates/nav.html")}}})}angular.module("dashboard",[]).config(a),a.$inject=["$stateProvider","LoadingProvider"]}(),function(){function a(){function a(){}a()}angular.module("dashboard").controller("DashboardController",a),a.$inject=[]}(),function(){function a(a,d){a.state(b,{url:"/usuario",views:{"":{templateUrl:d.uncache("app/modules/"+b+"/home.html"),controller:c,controllerAs:"vm"},nav:{templateUrl:d.uncache("app/templates/nav.html")}}}).state(b+".add",{url:"/add",views:{"":{templateUrl:d.uncache("app/modules/"+b+"/form.html"),controller:c,controllerAs:"vm"},nav:{templateUrl:d.uncache("app/templates/nav.html")}}}).state(b+".edit",{url:"/edit/:id",views:{"":{templateUrl:d.uncache("app/modules/"+b+"/form.html"),controller:c,controllerAs:"vm"},nav:{templateUrl:d.uncache("app/templates/nav.html")}}})}var b="usuario",c="UsuarioController";angular.module(b,[]).config(a),a.$inject=["$stateProvider","LoadingProvider"]}(),function(){function a(a,b,c,d,e,f){function g(){""===o.filtro&&i()}function h(){var a=c.id;a&&j(a),i()}function i(b,c){b=b||0,c=c||o.pagination.itemsPerPage,a.get(p+b+"/"+c+"/"+o.filtro).then(function(a){o.lista=a.data,o.pagination.total=a.total})}function j(b){a.get(p+b).then(function(a){o.form=a})}function k(){o.form._id?(""!==o.form.password&&""!==o.form.password2||(delete o.form.password,delete o.form.password2),a.put(p,o.form).then(function(a){a.success?(f.pop("success","Mensagem","Editado com sucesso!"),b.go(q,{},{reload:!0,inherit:!1})):f.pop("error","Mensagem","Ocorreu um erro, tente novamente!")})):a.post(p,o.form).then(function(a){console.log(a),a.success?(f.pop("success","Mensagem","Salvo com sucesso!"),b.go(q,{},{reload:!0,inherit:!1})):f.pop("error","Mensagem","Ocorreu um erro, tente novamente!")})}function l(){for(var a=o.lista.length-1;a>=0;a--)o.lista[a].selecionado=o.selector}function m(){for(var c=o.lista.length-1;c>=0;c--)o.lista[c].selecionado&&a.del(p+o.lista[c]._id).then(function(a){a.ok&&f.pop("success","Mensagem","Excluido com sucesso!")});b.go(q,{},{reload:!0,inherit:!1})}function n(){for(var a=o.lista.length-1;a>=0;a--)if(o.lista[a].selecionado)return!1;return!0}var o=this,p="/v1/usuario/",q="usuario";o.lista=[],o.total=0,o.form={},o.form.tipo="O",o.filtro="",o.pagination={},o.pagination.currentPage=1,o.pagination.itemsPerPage=25,o.pagination.total=0,o.save=k,o.selectAll=l,o.excluir=m,o.nothingSelected=n,o.filtrar=i,o.reset=g,d.$watch("vm.pagination.currentPage + vm.pagination.itemsPerPage",function(){var a=(o.pagination.currentPage-1)*o.pagination.itemsPerPage,b=o.pagination.itemsPerPage;i(a,b)}),h()}var b="usuario";angular.module(b).controller("UsuarioController",a),a.$inject=["ApiService","$state","$stateParams","$scope","$filter","toaster"]}(),function(){function a(a,d){a.state(b,{url:"/config",views:{"":{templateUrl:d.uncache("app/modules/"+b+"/home.html"),controller:c,controllerAs:"vm"},nav:{templateUrl:d.uncache("app/templates/nav.html")}}})}var b="config",c="ConfigController";angular.module(b,["ngFileUpload"]).config(a),a.$inject=["$stateProvider","LoadingProvider"]}(),function(){function a(a,b,c,d,e,f){function g(){d.getConfig().then(function(a){i.form=a?a:{}})}function h(){f.upload({url:j,data:i.form,method:"POST",file:i.form.upload}).then(function(a){a.data.success&&(c.pop("success","Mensagem","Editado com sucesso!"),b.go(k,{},{reload:!0,inherit:!1}))})}var i=this,j=e.api+"/v1/config",k="config";i.form={},i.save=h,g()}var b="config";angular.module(b).controller("ConfigController",a),a.$inject=["ApiService","$state","toaster","DbService","myConfig","Upload"]}();